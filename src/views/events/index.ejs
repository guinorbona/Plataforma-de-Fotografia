<%- include('../partials/header') %>
<%- include('../partials/navbar') %>

<main class="container">
  <div class="section-header">
    <h1><%= isAdmin ? 'Todos os Eventos' : 'Meus Eventos' %></h1>
    <a href="/eventos/novo" class="btn btn-primary">Novo Evento</a>
  </div>

  <!-- Form de filtros aqui, se já tiver -->

  <% if (eventos && eventos.length) { %>
    <table class="table">
      <thead>
        <tr>
          <th>Evento</th>
          <th>Data</th>
          <% if (isAdmin) { %>
            <th>Cliente</th>
          <% } %>
          <th class="actions-col">Ações</th>
        </tr>
      </thead>
      <tbody>
        <% eventos.forEach(e => { %>
          <tr>
            <td><%= e.eventName %></td>
            <td><%= e.eventDate %></td>
            <% if (isAdmin) { %>
              <td><%= e.userName || e.userId %></td>
            <% } %>
            <td class="actions-col">
              <a href="/galeria/<%= e.id %>" class="btn btn-secondary btn-small">Galeria</a>
              <a href="/eventos/<%= e.id %>/editar" class="btn btn-outline btn-small">Editar</a>
              <form action="/eventos/<%= e.id %>/excluir" method="POST" class="inline-form" onsubmit="return confirm('Tem certeza que deseja excluir este evento?');">
                <button type="submit" class="btn btn-danger btn-small">Excluir</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } else { %>
    <p><%= isAdmin ? 'Nenhum evento cadastrado.' : 'Você ainda não possui eventos cadastrados.' %></p>
  <% } %>
</main>

<%- include('../partials/footer') %>
